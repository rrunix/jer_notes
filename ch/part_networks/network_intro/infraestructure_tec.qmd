En los capítulos anteriores hemos visto una pequeña introducción a Internet y sus componentes. Ahora pasaremos a ver brevemente la parte física (Hardware) de la Internet antes de ver la parte Software en los siguientes capítulos. En la @fig-ni-infra-net tenemos un ejemplo de diagrama donde se muestran los componentes de la red y parte de la taxonomía que veremos en este capítulo.

![Red simplificada [@kurose2017computer].](resources/network_image.png){#fig-ni-infra-net}

Empezando por la parte más externa, vamos a hablar de los sistemas terminales ("end systems"). De forma simplificada, podríamos decir que estos son los sistemas que utilizan la Internet, y que el resto de componentes son los que sustentan la red. En esta categoría tendríamos los ordenadores, smartphones, dispositivos inteligentes.. es decir, los componentes conectados. En la jerga de Internet estos componentes se conocen como "host", por que son los que tienen aplicaciones que funcionan sobre internet. Estos dispositivos se pueden conectar a la red a través de diferentes tecnologías que veremos posteriormente en este capítulo como WiFi o 5g. Los hosts, dependiendo de su uso, también se pueden clasificar como clientes y servidores. Los servidores generalmente ofrecen un servicio que los clientes utilizan. Por ejemplo, cuando hablamos por Whatsapp, nuestro teléfono y el teléfono destino son clientes, y los "ordenadores" de Whatsapp que ofrecen el servidor son servidores. Esto no es clasificación estática y fija, y un cliente puede actuar de servidor también. Este tipo de clasificación la veremos en más detalle en el @appl.

Moviéndonos a la capa más interna tenemos las redes de acceso ("access network"). Las redes de acceso es la red en la cual se conecta un host con el router (también conocido router de borde, o inglés "edge router") en el camino hacia el núcleo de la red (core network). El router de borde junto a los hosts también forman parte de lo que se denomina el borde de la red ("edge of the network"). Siguiendo con los ejemplos anteriores, cuando nos conectados a Internet por WiFi/Ethernet en nuestra casa, universidad, etc, nos conectamos al "router", que sería el router de borde. 

Aquí merece la pena hacer una aclaración técnica sobre el "router" doméstico del ejemplo anterior. En realidad, estos dispositivos son equipos multifunción que integran varias tecnologías: un switch para la red local, un router para el enrutamiento entre redes, y típicamente un punto de acceso WiFi. Cuando nos conectamos por cable o WiFi, técnicamente nos conectamos primero al switch integrado, y cuando la comunicación debe salir hacia Internet, el componente router se encarga del enrutamiento hacia otras redes. Aunque en el uso cotidiano llamamos "router" a todo el dispositivo, es importante entender que internamente realiza múltiples funciones de red.

En el router doméstico, o router de borde, tenemos dos tipos de conexiones principales: la conexión con los hosts y la conexión con el siguiente router. Vamos a ver brevemente los tipos de tecnología para cada caso. Empezando por la conexión host-router, tenemos dos tipos principalmente: conexión cableada tipo Ethernet y conexión inalámbrica WiFi. En la @tab-ni-infra-host-edge podéis ver una comparativa de sus principales características.

::: {#tab-ni-infra-host-edge}
| Tecnología | Medio Físico | Tipo Conexión | Simetría | Velocidad Típica | Alcance | Estado 2025 |
|------------|---------------|---------------|----------|------------------|---------|--------------|
| **WiFi 6** | Radio 2.4/5/6 GHz | Compartida | Simétrica* | 200-400 Mb/s | 30-50 m | Estándar |
| **Ethernet** | Par trenzado | Dedicada | Simétrica | 1000/1000 Mb/s | <100 m | Estándar |
| **4G LTE** | Radio móvil | Compartida | Asimétrica | 50/15 Mb/s | Varios km | Estable |
| **5G** | Radio móvil | Compartida | Asimétrica | 300/50 Mb/s | 1-5 km | En despliegue |

Tabla comparativa de tecnologías de acceso host-router. *Simétrica en teoría, asimétrica en la práctica.
:::

WiFi 6 es una tecnología de acceso inalámbrico, es decir, no requiere una conexión física entre los dispositivos. Como contrapartida a la flexibilidad de no tener el vínculo físico, el alcance se ve reducido. La máxima distancia entre el router y el dispositivo es típicamente de 30-50 metros, pero puede verse reducida por obstáculos entre ambos. Los estándares WiFi van desde el original 802.11 hasta el más moderno 802.11ax (WiFi 6E), que es capaz de alcanzar velocidades teóricas de hasta 9.6 Gb/s mediante múltiples antenas y técnicas avanzadas. Además, en las últimas versiones se ha incrementado el ancho de banda disponible, incluyendo la banda de 6 GHz, proporcionando espectro adicional para reducir la congestión. La conexión mediante WiFi es simétrica en teoría, aunque en la práctica las velocidades pueden variar según las condiciones del entorno, y del hardware del router y del host. Una de las principales desventajas de los medios inalámbricos es que el medio de transmisión es compartido entre todos los dispositivos, lo que puede causar problemas de congestión cuando hay muchos dispositivos conectados simultáneamente.

Por otra parte, tenemos el acceso tipo Ethernet, que se realiza mediante un cable físico de par trenzado (que explicaremos más adelante). En este caso, el alcance se extiende hasta algo menos de 100 metros. Al ser una conexión física, generalmente no importa qué obstáculos haya entre ambos puntos[^ethernet_interference]. Algunas personas han intentado empalmar cables para lograr longitudes superiores a 100 metros, pero esto no funciona adecuadamente. Las causas principales son la degradación de la señal y que los protocolos Ethernet están diseñados asumiendo tiempos específicos de propagación en el cable[^degradation_ethernet]. Al ser un tipo de conexión dedicada, cuando nos conectamos por cable no tenemos problemas de congestión del medio de transmisión. Las velocidades estándar actuales suelen ser de 1000 Mb/s (Gigabit Ethernet), aunque existen estándares más rápidos como 10 Gigabit Ethernet.

Finalmente, tenemos las tecnologías de acceso móvil como alternativa de conectividad. Tanto **4G LTE** como **5G** utilizan ondas de radio en el espectro móvil licenciado para conectar dispositivos con las torres de telefonía, que actúan como puntos de acceso a la red del operador. Su principal ventaja es el amplio alcance (varios kilómetros para 4G, 1-5 km para 5G según la banda), lo que las hace ideales para ubicaciones sin infraestructura fija o como backup de conectividad. Ambas tecnologías son asimétricas y utilizan un medio compartido, con 4G LTE ofreciendo velocidades típicas de 50/15 Mb/s y 5G alcanzando hasta 300/50 Mb/s en condiciones reales. El 5G representa una evolución significativa al usar un espectro más amplio, incluyendo frecuencias milimétricas, aunque presenta un compromiso entre velocidad y alcance: las frecuencias más altas proporcionan mayor velocidad pero menor penetración. Mientras 4G LTE está completamente desplegado, 5G se encuentra en fase de despliegue activo con cobertura variable según ubicación y operador[^mobile_tech].

[^mobile_tech]: El rendimiento de ambas tecnologías puede degradarse significativamente en áreas de alta densidad poblacional o durante horas pico debido a la congestión del medio compartido.

[^ethernet_interference]: Técnicamente sí pueden afectar ciertos factores, por ejemplo, campos magnéticos intensos o interferencias electromagnéticas sobre el cable Ethernet.

[^degradation_ethernet]: La resistencia del cable se incrementa linealmente con la distancia, aumenta la probabilidad de interferencias electromagnéticas, y se degrada la relación señal-ruido, entre otros factores.

Ahora pasaremos a la conexión del router de borde con el siguiente router. Las tecnologías disponibles

::: {#tab-ni-infra-edge-core}
| Tecnología | Medio Físico | Tipo Conexión | Simetría | Velocidad Típica | Alcance | Estado 2025 |
|------------|---------------|---------------|----------|------------------|---------|--------------|
| **Dial-up** | Par trenzado | Dedicada | Simétrica | 56 kb/s | Ilimitado* | Obsoleta |
| **DSL/VDSL** | Par trenzado | Dedicada | Asimétrica | 50/15 Mb/s | <3 km de central | En declive |
| **Cable HFC** | Coaxial/Fibra | Compartida | Asimétrica | 300/30 Mb/s | Red local | Estable |
| **FTTH PON** | Fibra óptica | Compartida | Simétrica | 1000/1000 Mb/s | <20 km | En expansión |
| **FTTH P2P** | Fibra óptica | Dedicada | Simétrica | 10000/10000 Mb/s | <40 km | Premium |
| **Satelital** | Microondas | Compartida | Asimétrica | 100/20 Mb/s | Global | Nicho |

:::

Para la conexión entre el router de borde y el siguiente router en la jerarquía de red, disponemos de diversas **tecnologías WAN** (Wide Area Network) que han evolucionado significativamente. Las tecnologías más tradicionales como **Dial-up** (56 kb/s) están obsoletas, mientras que **DSL/VDSL** (50/15 Mb/s típicas) se encuentran en declive debido a sus limitaciones de distancia (<3 km de la central telefónica) y asimetría inherente del par trenzado. El **Cable HFC** (Hybrid Fiber-Coaxial) ofrece velocidades superiores (300/30 Mb/s) mediante una combinación de fibra óptica hasta el vecindario y cable coaxial hasta el hogar, aunque mantiene asimetría y medio compartido. Las tecnologías de **fibra óptica** representan el estado del arte: **FTTH PON** (Fiber-to-the-Home Passive Optical Network) proporciona 1000/1000 Mb/s simétricos con medio compartido y está en expansión activa, mientras que **FTTH P2P** (Point-to-Point) ofrece conexiones dedicadas de hasta 10000/10000 Mb/s para aplicaciones premium. Como alternativa para ubicaciones remotas, la **conectividad satelital** proporciona cobertura global con velocidades de 100/20 Mb/s, aunque con mayor latencia y asimetría, ocupando un nicho específico donde otras tecnologías no son viables.

Finalmente, llegamos a la última capa, denominada el núcleo de la red. El núcleo de la red es una compleja jerarquía de redes interconectadas que trabajan conjuntamente para proporcionar conectividad global. Por contextualizar las tres partes de la red mencionadas hasta ahora vamos a ver un ejemplo. Supón que una persona A (host) envía un mensaje (carta) a otra persona B (otro host). La persona A deposita la carta en correos, que sería el router de frontera. Todo el proceso del envio de la carta desde correos (router de frontera de A) hasta llegar al buzón de B (router de frontera de B) sería el núcleo de la red.

Después de haber ejemplificado su estructura, vamos a indagar en cómo está estructurado el núcleo de la red. Primeramente hablaremos de su estructura, que comentamos en la introducción tiene una estructura descentralizada, lo que permite que el sistema sea mas robusto y escalable. Los componentes de esta red que nos proporcionan interconexión con otras redes se denominan ISP (provedores de seervicio de Internet, del inglés "Internet Service Providers"). Los ISPs se organiza en tres niveles, cada uno con características y roles específicos en el ecosistema global de conectividad.

Los proveedores de Nivel 1 forman la elite de Internet, operando las redes troncales globales de más alta capacidad. Estas organizaciones incluyen empresas como cogent, AT&T, Verizo, TeliaSonera y Telefónica. Los provedores TIER 1 mantienne infraestructuras que abarcan continentes enteros con enlaces de 10-100 Gb/s y routers de rendimiento extremo capaces de procesar millones de paquetes por segundo. Entre los provedores ISP Tier 1 se pueden mandar mensaje sin costo alguno mediante acuerdos de "peering" gratuito. Esto mantiene la exclusividad del estatus Tier 1, ya que se deben alcanzar acuerdos con todos los Tier 1 existentes antes de ser considerado Tier 1.

Los ISP de Nivel 2 operan redes regionales o nacionales más pequeñas que se conectan a Internet a través de uno o más proveedores Tier 1. Pagan a los Tier 1 por "tránsito" - el servicio de llevar su tráfico a destinos que no pueden alcanzar directamente. Sin embargo, los Tier 2 también establecen conexiones directas entre sí cuando es mutuamente beneficioso, reduciendo los costos de tránsito y mejorando el rendimiento para rutas comunes. Estos proveedores sirven como el tejido conectivo esencial de Internet, agregando tráfico de numerosos proveedores más pequeños y proporcionando redundancia y rutas alternativas. Su posición intermedia les permite ofrecer servicios especializados y soporte más personalizado que los grandes Tier 1, mientras mantienen conexiones globales a través de sus relaciones de tránsito.

Los ISP de Nivel 3 son los proveedores de acceso que conectan directamente a usuarios finales - hogares, pequeñas empresas, y organizaciones locales. Estos proveedores compran conectividad a Internet de ISP de niveles superiores y generalmente no mantienen conexiones directas entre sí. Su valor radica en el conocimiento local, servicio personalizado, y la infraestructura de "última milla" que lleva Internet directamente a los usuarios finales.



```{mermaid}
graph TD
    subgraph "Tier 1 ISPs"
        T1A["Tier 1 ISP A<br/>Global Backbone"]
        T1B["Tier 1 ISP B<br/>Global Backbone"]
        T1C["Tier 1 ISP C<br/>Global Backbone"]
    end
    
    subgraph "Tier 2 ISPs"
        T2A["Tier 2 ISP A<br/>Regional Provider"]
        T2B["Tier 2 ISP B<br/>Regional Provider"]
        T2C["Tier 2 ISP C<br/>Regional Provider"]
        T2D["Tier 2 ISP D<br/>Regional Provider"]
    end
    
    subgraph "Tier 3 ISPs"
        T3A["Tier 3 ISP A<br/>Local Provider"]
        T3B["Tier 3 ISP B<br/>Local Provider"]
        T3C["Tier 3 ISP C<br/>Local Provider"]
        T3D["Tier 3 ISP D<br/>Local Provider"]
        T3E["Tier 3 ISP E<br/>Local Provider"]
        T3F["Tier 3 ISP F<br/>Local Provider"]
    end
    
    %% Tier 1 peering relationships (free exchange)
    T1A -.->|"Free Peering"| T1B
    T1B -.->|"Free Peering"| T1C
    T1A -.->|"Free Peering"| T1C
    
    %% Tier 2 purchasing transit from Tier 1
    T1A -->|"Transit (Paid)"| T2A
    T1A -->|"Transit (Paid)"| T2B
    T1B -->|"Transit (Paid)"| T2C
    T1C -->|"Transit (Paid)"| T2D
    
    %% Tier 2 peering with other Tier 2
    T2A -.->|"Peering"| T2C
    T2B -.->|"Peering"| T2D
    
    %% Tier 3 purchasing transit from Tier 2
    T2A -->|"Transit (Paid)"| T3A
    T2A -->|"Transit (Paid)"| T3B
    T2B -->|"Transit (Paid)"| T3C
    T2C -->|"Transit (Paid)"| T3D
    T2D -->|"Transit (Paid)"| T3E
    T2D -->|"Transit (Paid)"| T3F
    
    %% Styling
    classDef tier1 fill:#ff6b6b,stroke:#d63031,stroke-width:3px,color:#fff
    classDef tier2 fill:#4ecdc4,stroke:#00b894,stroke-width:2px,color:#fff
    classDef tier3 fill:#fdcb6e,stroke:#e17055,stroke-width:2px,color:#2d3436
    
    class T1A,T1B,T1C tier1
    class T2A,T2B,T2C,T2D tier2
    class T3A,T3B,T3C,T3D,T3E,T3F tier3
```



<!-- 

**Cable de Par Trenzado**: El medio más común para redes locales. Consiste en pares de cables de cobre trenzados que reducen la interferencia electromagnética. Se clasifica en categorías (Cat 5e, Cat 6, Cat 6a) según su capacidad de transmisión. Es económico y fácil de instalar, pero tiene limitaciones de distancia y velocidad.

**Fibra Óptica**: Utiliza pulsos de luz para transmitir datos a través de hilos de vidrio o plástico extremadamente delgados. Ofrece velocidades muy altas, inmunidad a interferencias electromagnéticas y capacidad para grandes distancias sin repetidores. Es el medio preferido para enlaces de alta velocidad y largas distancias.

**Medios Inalámbricos**: Incluyen ondas de radio, microondas y luz infrarroja. Las tecnologías WiFi utilizan radiofrecuencias en las bandas de 2.4 GHz y 5 GHz (y más recientemente 6 GHz). Las redes móviles utilizan diversas bandas de frecuencia para proporcionar conectividad de área amplia.

 -->