# Introducci√≥n a las Redes de Ordenadores

La etimolog√≠a de Internet es "Interconnected Networks" (Redes interconectadas), lo cual nos da una pista sobre qu√© es: una red global interconectada de redes m√°s peque√±as que permite la comunicaci√≥n entre los diferentes dispositivos conectados. Internet opera como un sistema descentralizado compuesto por varias capas de redes, desde las √°reas de red locales (LAN), que son los nodos donde nos conectamos, hasta las √°reas de red anchas (WAN) que abarcan continentes. 

<!-- Faltaria algo de chicha aqu√≠ -->

::: {#fig-ni-intro-network}
```{mermaid}
graph TD
    PAN["üì± PAN (Personal Area Network)<br>Smartphone ‚Üî Smartwatch"]
    LAN["üè† LAN (Local Area Network)<br>Home/Office/Building Network"]
    WLAN["üì° WLAN (Wireless LAN)<br>Wi-Fi Implementation of LAN"]
    CAN["üè´ CAN (Campus Area Network)<br>Multiple LANs in Campus"]
    MAN_ISP["üèôÔ∏è MAN (Metropolitan Area Network)<br>ISP Network"]
    MAN_MOBILE["üì∂ MAN (Metropolitan Area Network)<br>5G/4G Mobile Network"]
    WAN["üåç WAN (Wide Area Network)<br>Between Cities or Countries"]
    INTERNET["üåê Internet<br>Global Interconnected WANs"]
    VPN["üîê VPN (Virtual Private Network)<br>Secure Tunnel over Internet"]
    
    %% Traditional wired path
    PAN --> LAN
    WLAN -.-> LAN
    LAN -->|Multiple LANs| CAN
    CAN --> MAN_ISP
    LAN -->|Multiple LANs| MAN_ISP
    
    %% Mobile path
    PAN --> MAN_MOBILE
    
    %% Both MANs connect to WAN
    MAN_ISP -->|Multiple MANs| WAN
    MAN_MOBILE -->|Multiple MANs| WAN
    WAN -->|Multiple WANs| INTERNET
    VPN --> INTERNET
    
    style WLAN fill:#e1f5fe
    style VPN fill:#f3e5f5
    style MAN_MOBILE fill:#fff3e0
```
Topolog√≠a jer√°rquica de redes de computadores.
:::


En la @fig-ni-intro-network podemos ver una organizaci√≥n jer√°rquica de redes de computadores, donde m√∫ltiples redes del mismo nivel se agregan para formar el siguiente nivel superior. A medida que ascendemos en la jerarqu√≠a, el n√∫mero de dispositivos que se pueden conectar se incrementa exponencialmente. Las PAN son redes que conectan dispositivos personales como smartphones y sirven para conectar con smartwatches y electrodom√©sticos, entre otros. Desde las PAN podemos tomar dos rutas principales hasta el Internet, a trav√©s de las LAN o directamente con las MAN (5g o 4g). Las LAN son redes que cubren hogares, oficinas u otras unidades donde el n√∫mero de dispositivos es reducido. La conexi√≥n a las LAN puede ser cableada o inal√°mbrica, por ejemplo con WLAN (Wi-Fi). Una CAN es una agrupaci√≥n de redes LAN, generalmente en campus universitarios o grandes empresas donde el n√∫mero de dispositivos es elevado. Las redes CAN, LANs individuales y las redes de telefon√≠a m√≥vil (e.g, 4G/5G) se juntan para dar lugar a las MAN. Las MAN generalmente abarcan ciudades o grupos de ciudades, que interconectadas dan lugar a las WANs. Finalmente, m√∫ltiples WANs dan lugar al Internet global. Las VPN (Virtual Private Network) operan como t√∫neles seguros sobre toda esta infraestructura, permitiendo que los dispositivos cambien din√°micamente entre rutas seg√∫n la tecnolog√≠a disponible en cada momento.


Para ilustrar el funcionamiento de Internet vamos a utilizar un ejemplo simplificado. Supongamos que Mar√≠a quiere enviar un mensaje desde un Smartphone conectado a Internet a trav√©s del WiFi de su casa en Madrid a Takeshi, conectado a una LAN en la universidad de Tokio. Puede que algunos t√©rminos no os suenen, no os preocup√©is, los iremos viendo a lo largo del tema. El proceso de envio ser√≠a el siguiente:

- **1. Origen - LAN Madrid**: El smartphone de Mar√≠a crea el mensaje con la direcci√≥n IP de destino de Tokio y la direcci√≥n MAC del router WiFi como destino inmediato. El router WiFi recibe el frame Ethernet, examina la direcci√≥n IP de destino y se da cuenta de que no pertenece a su red local. Reemplaza la direcci√≥n MAC de destino por la de su gateway (ISP) y reenv√≠a el paquete.

- **2. Router local a MAN**: El router del ISP local recibe el frame con su propia direcci√≥n MAC como destino. Extrae el paquete IP, examina la direcci√≥n IP de destino y determina que debe enviarlo hacia la MAN de Madrid. Encapsula el paquete en un nuevo frame con la direcci√≥n MAC del siguiente router como destino.

- **3. MAN a WAN nacional**: El router de la MAN de Madrid recibe el frame dirigido a su direcci√≥n MAC, extrae el paquete IP y analiza el destino. Al comprender que Tokio est√° fuera de Espa√±a, encapsula el paquete en un nuevo frame con la direcci√≥n MAC del router de la WAN espa√±ola como destino.

- **4. WAN a Internet global**: El router de la WAN espa√±ola recibe el frame con su direcci√≥n MAC, consulta sus tablas de rutas internacionales para Jap√≥n y encapsula el paquete con la direcci√≥n MAC del siguiente router en la ruta internacional. En cada salto a trav√©s del backbone de Internet, los routers intercambian las direcciones MAC (origen y destino) mientras preservan las direcciones IP originales.

- **5. Llegada a Jap√≥n - WAN a MAN**: Un router de la WAN japonesa recibe el frame dirigido a su direcci√≥n MAC, reconoce que el destino IP est√° dentro de Jap√≥n y encapsula el paquete con la direcci√≥n MAC del router de la MAN de Tokio como nuevo destino.

- **6. MAN a CAN**: El router de la MAN de Tokio recibe el frame con su direcci√≥n MAC como destino, examina la IP y determina que pertenece a la universidad de Tokio. Encapsula el paquete en un nuevo frame dirigido a la direcci√≥n MAC del router gateway de la CAN universitaria.

- **7. CAN a LAN destino**: El router de la CAN universitaria recibe el frame dirigido a su direcci√≥n MAC, analiza la IP de destino para identificar qu√© LAN espec√≠fica del campus corresponde, y encapsula el paquete con la direcci√≥n MAC del router de esa LAN como destino.

- **8. Destino final - LAN universitaria**: El router de la LAN recibe el frame con su direcci√≥n MAC como destino, extrae el paquete IP y lo entrega al switch. El switch examina sus tablas ARP para encontrar la direcci√≥n MAC correspondiente a la IP de Takeshi, y finalmente env√≠a el frame con la direcci√≥n MAC real de Takeshi como destino, completando el viaje desde Madrid.

En este ejemplo simplificado de env√≠o de un mensaje por Internet ya estamos dispuestos para comprender algunos de sus componentes y identificadores. Si os fij√°is, hay dos componentes que est√°n presentes a lo largo del ejemplo, los switches y routers. El router es un dispositivo que conecta diferentes redes entre s√≠ usando direcciones IP. Es como un "director de tr√°fico" que conoce las rutas entre redes distantes. Su funcionamiento a grandes rasgos es el siguiente: Llega un paquete, se identifica a trav√©s de la IP destino el camino de salida obteniendo la MAC del siguiente salto (`hop`), y se env√≠a el paquete. Este proceso se repite hasta llegar a la red destino, por eso estos algoritmos, y por ello se determinan `hop by hop`. El switch por otra parte es un dispositivo que conecta equipos dentro de una misma red local usando direcciones MAC. Funciona como un "repartidor inteligente" que conoce exactamente d√≥nde est√° cada dispositivo en su red. Completando la analog√≠a, Los switches manejan el tr√°fico local, mientras que cuando necesitan enviar datos fuera de su red, los entregan a los routers. Los routers, a su vez, se conectan a otros routers o switches seg√∫n el destino. 

El procedimiento de env√≠o se realiza con dos identificadores que hemos mencionado durante el ejemplo, la MAC y la direcci√≥n IP. La direcci√≥n IP funciona como la direcci√≥n postal de una casa y permite localizar el dispositivo en las redes (como 192.168.1.100), y la direcci√≥n MAC, que es como el DNI del dispositivo: √∫nico, asignado por el fabricante y que no cambia nunca. Los routers usan direcciones IP para decidir hacia d√≥nde enviar los paquetes, mientras que los switches usan direcciones MAC para entregar los datos al dispositivo correcto dentro de la red local. Por √∫ltimo, tenemos ARP, un protocolo que nos permite relacionarlas. El protocolo ARP es como un servicio de directorio telef√≥nico: cuando un dispositivo conoce la "direcci√≥n postal" (IP) pero necesita el "DNI" (MAC) para hacer la entrega final, env√≠a una consulta ARP preguntando "¬øqui√©n vive en esta direcci√≥n?". El dispositivo correspondiente responde con su MAC, permitiendo que la comunicaci√≥n se complete. ARP traduce entre el mundo de las direcciones (IP) y el mundo de las identidades f√≠sicas (MAC).

<!-- PONER UNA IMAGEN AQU√ç -->
Una vez vistos los componentes principales de Internet, vamos a realizar unas observaciones. Primero, Internet es un sistema distribuido. Esto quiere decir que es una uni√≥n de dispositivos que operan juntos con el fin de ofrecer una funcionalidad. Segundo, Internet tiene una arquitectura descentralizada[^1]. Por lo tanto, la ca√≠da de alguna parte de Internet no tiene porque implicar la ca√≠da de Internet globalmente. Tercero, la ejecuci√≥n de los procesos de enrutamiento es local. Cada nodo de la red s√≥lo necesita saber cual va a ser el siguiente destino ("hop"). Es decir, no hay una planificaci√≥n global para el env√≠o de los paquetes. Debido a esto los algoritmos de enrutamiento normalmente se denominan "hop by hop" e incorporan informaci√≥n de tiempo real [^2], por lo que dos mensajes enviados al mismo destino no tienen por que seguir la misma ruta.  Todo esto facilita la escalabilidad del sistema, disminuye la congesti√≥n de la red y adem√°s proporciona resiliencia a fallos.

[^1]: Algunos componentes de Internet tienen una arquitectura h√≠brida, c√≥mo los ISPs grandes y DNS.
[^2]: Los routers comparten y propagan informaci√≥n de congesti√≥n y destinos disponibles con los routers adyacentes.

<!-- Ahora pasaremos a ver algunos de los componentes m√°s importantes mencionados en los ejemplos. Los switch, los routers. Un switch es un dispositivo que conecta equipos dentro de una misma red local usando direcciones MAC. Funciona como un "repartidor inteligente" que conoce exactamente d√≥nde est√° cada dispositivo en su red. En cambio, un router es un dispositivo que conecta diferentes redes entre s√≠ usando direcciones IP. Es como un "director de tr√°fico" que conoce las rutas entre redes distantes. Los switches manejan el tr√°fico local, mientras que cuando necesitan enviar datos fuera de su red, los entregan a los routers. Los routers, a su vez, se conectan a otros routers o switches seg√∫n el destino. 

Por √∫ltimo, veremos dos identificadores utilizados en el ejemplo, IP y MAC, y un protocolo para relacionarlos, ARP. Cada dispositivo tiene dos identificadores: la direcci√≥n IP, que funciona como la direcci√≥n postal de una casa y permite localizar el dispositivo en las redes (como 192.168.1.100), y la direcci√≥n MAC, que es como el DNI del dispositivo: √∫nico, asignado por el fabricante y que no cambia nunca. Los routers usan direcciones IP para decidir hacia d√≥nde enviar los paquetes, mientras que los switches usan direcciones MAC para entregar los datos al dispositivo correcto dentro de la red local. El protocolo ARP es como un servicio de directorio telef√≥nico: cuando un dispositivo conoce la "direcci√≥n postal" (IP) pero necesita el "DNI" (MAC) para hacer la entrega final, env√≠a una consulta ARP preguntando "¬øqui√©n vive en esta direcci√≥n?". El dispositivo correspondiente responde con su MAC, permitiendo que la comunicaci√≥n se complete. ARP traduce entre el mundo de las direcciones (IP) y el mundo de las identidades f√≠sicas (MAC). -->

Hasta ahora hemos visto un ejemplo simplificado de env√≠o de mensaje, los principales componentes de internet y algunos conceptos t√©cnicos. Pero a√∫n falta algo. Hemos dicho que Internet es un sistema distribuido formado por redes interconectadas. Pero, ¬øC√≥mo se entienden entre s√≠?. La respuesta son los protocolos. Un protocolo es una serie de pasos bien definidas que se realizan con un objetivo. En redes de computadores, es como un manual de instrucciones que especifica c√≥mo dos dispositivos deben intercambiar informaci√≥n. Es un conjunto de reglas que define exactamente c√≥mo deben estructurarse los mensajes, en qu√© orden enviarlos, que estructura y formato tienen los mensajes que recibimos, y c√≥mo se debe actuar. Internet funciona gracias a una familia de protocolos organizados en capas, que veremos en el @intro-network-stacks.

Por ejemplificarlo los protocolos de red con una analog√≠a, son como las reglas de tr√°fico en una ciudad: as√≠ como los autos necesitan sem√°foros, se√±ales y carriles para circular ordenadamente sin chocar, los datos en una red necesitan protocolos que definan c√≥mo moverse, comunicarse y llegar a su destino correctamente. Sin estas reglas, tanto el tr√°fico vehicular como el flujo de datos ser√≠an un caos total, con "accidentes" y p√©rdida de informaci√≥n constante.

<!-- Quiz√°s mencionar algo de la escalabidad, o como ha crecido en los √∫ltimos a√±os? o en la historia? -->

<!-- Introducir el resto de puntos -->

<!-- En los siguientes apartados veremos blablah.. -->
<!-- Comentar algo de juegos -->
<!-- Quiz√°s decir que el aborde inicial es inform√°tico pero despu√©s entraremos a la parte m√°s relacionada con los videojuegos -->

En los siguientes apartados vamos a profundizar en los conceptos introducidos hasta ahora, obteniendo un mejor entendimiento de c√≥mo funciona Internet, cuales son los principales actores involucrados, y c√≥mo podemos realizar nuestras propias aplicaciones que funcionen sobre la red. Los puntos se abordar√°n de la siguiente manera. Primero, se ver√°n desde un enfoque "inform√°tico", y despu√©s contextualizaremos como encaja cada uno de los puntos desde el punto de vista de desarrollo de videojuegos.


<!-- ## La Historia de Internet
{{< include history.qmd >}}

## Network Infrastructure and Transmission Technologies
{{< include infraestructure_tec.qmd >}}

# Rendimiento
{{< include performance.qmd >}} -->

